<app-titel *ngIf="mode === 'Film_Hinzufuegen'">Film hinzufügen</app-titel>
<app-titel *ngIf="mode === 'Film_Bearbeiten'">Film bearbeiten</app-titel>
<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <div class="container is-max-desktop p-5 mt-5">
    <!-- Input-TITEL -->

    <div class="field form-group">
      <label class="label">Film-Titel</label>
      <div class="control black-border has-icons-left block">
        <input
          class="input form-control"
          type="text"
          placeholder="Film-Titel"
          formControlName="title"
          [ngClass]="{
            'is-danger': form.get('title').touched && form.get('title').invalid
          }"
        />
        <span class="icon is-small is-left">
          <i class="fas fa-video"></i>
        </span>
      </div>
    </div>

    <!-- Error-TITEL -->

    <div
      class="error"
      *ngIf="form.get('title').touched && form.get('title').invalid"
    >
      <div *ngIf="form.get('title').errors.required">
        Movie-Titel darf nicht leer sein
        <span class="icon is-small is-left">
          <i class="fas fa-exclamation-triangle"></i>
        </span>
      </div>
    </div>

    <!-- Input-DAUER -->

    <div class="field form-group">
      <label class="label">Dauer</label>
      <div class="control has-icons-left block">
        <input
          class="input form-control"
          type="number"
          placeholder="Dauer in Minuten "
          formControlName="duration"
          [ngClass]="{
            'is-danger':
              form.get('duration').touched && form.get('duration').invalid
          }"
        />
        <span class="icon is-small is-left">
          <i class="far fa-clock"></i>
        </span>
      </div>
    </div>

    <!-- Error-DAUER -->

    <div
      class="error"
      *ngIf="form.get('duration').touched && form.get('duration').invalid"
    >
      <div *ngIf="form.get('duration').errors.required">
        Dauer darf nicht leer sein
        <span class="icon is-small is-left">
          <i class="fas fa-exclamation-triangle"></i>
        </span>
      </div>
    </div>

    <!-- Input-ERSCHEINUNGSJAHR -->

    <div class="field form-group">
      <label class="label">Erscheinungsjahr</label>
      <div class="control has-icons-left block">
        <input
          class="input form-control"
          type="number"
          placeholder="Erscheinungsjahr"
          formControlName="release_year"
        />
        <span class="icon is-small is-left">
          <i class="fas fa-calendar-alt"></i>
        </span>
      </div>
    </div>

    <!-- Error-ERSCHEINUNGSJAHR -->

    <div
      class="error"
      *ngIf="
        form.get('release_year').touched && form.get('release_year').invalid
      "
    >
      <div *ngIf="form.get('release_year').errors.required">
        Erscheinungsjahr darf nicht leer sein
        <span class="icon is-small is-left">
          <i class="fas fa-exclamation-triangle"></i>
        </span>
      </div>
    </div>

    <!-- Input-GENRE -->

    <div class="field form-group">
      <label class="label">Genre</label>
      <div class="control has-icons-left genre">
        <div class="select">
          <select
            class="form-control"
            formControlName="genre"
            [ngClass]="{
              'is-invalid':
                form.get('genre').touched && form.get('genre').invalid
            }"
          >
            <option selected>Action</option>
            <option>Abenteuer</option>
            <option>Animation</option>
            <option>Drama</option>
            <option>Horror</option>
            <option>Komödie</option>
            <option>Krimi</option>
            <option>Liebe</option>
            <option>Science-Fiction</option>
            <option>Thriller</option>
            <option>Western</option>
            <option>Fantasy</option>
            <option>Nicht zuordbar</option>
          </select>
        </div>
        <div class="icon is-small is-left">
          <i class="fas fa-hand-pointer"></i>
        </div>
      </div>
    </div>

    <!-- Error-GENRE -->

    <div
      class="error"
      *ngIf="form.get('genre').touched && form.get('genre').invalid"
    >
      <div *ngIf="form.get('genre').errors.required">
        Genre darf nicht leer sein
        <span class="icon is-small is-left">
          <i class="fas fa-exclamation-triangle"></i>
        </span>
      </div>
    </div>

    <!-- Input-ALTERSFREIGABE -->

    <div class="field form-group">
      <label class="label">Altersfreigabe</label>
      <div class="control has-icons-left">
        <div class="select">
          <select
            class="form-control"
            formControlName="fsk"
            [ngClass]="{
              'is-invalid': form.get('fsk').touched && form.get('fsk').invalid
            }"
          >
            <option selected>0</option>
            <option>6</option>
            <option>12</option>
            <option>16</option>
            <option>18</option>
          </select>
        </div>
        <div class="icon is-small is-left">
          <i class="fas fa-hand-pointer"></i>
        </div>
      </div>
    </div>

    <!-- Error-ALTERSFREIGABE -->

    <div
      class="error"
      *ngIf="form.get('fsk').touched && form.get('fsk').invalid"
    >
      <div *ngIf="form.get('altersfreigabe').errors.required">
        Altersfreigabe darf nicht leer sein
        <span class="icon is-small is-left">
          <i class="fas fa-exclamation-triangle"></i>
        </span>
      </div>
    </div>

    <!-- Input-BESCHREIBUNG -->

    <div class="field form-group">
      <label class="label">Beschreibung</label>
      <div class="control has-icons-left block">
        <textarea
          class="input textarea form-control"
          type="text"
          placeholder="Beschreibung"
          formControlName="description"
        ></textarea>
        <span class="icon is-small is-left">
          <i class="fas fa-align-left"></i>
        </span>
      </div>
    </div>

    <!-- Error-BESCHREIBUNG -->

    <div
      class="error"
      *ngIf="form.get('description').touched && form.get('description').invalid"
    >
      <div *ngIf="form.get('description').errors.required">
        Beschreibung darf nicht leer sein
        <span class="icon is-small is-left">
          <i class="fas fa-exclamation-triangle"></i>
        </span>
      </div>

      <div *ngIf="form.get('description').errors.minlength">
        Beschreibung muss mind. 20 Zeichen enthalten.
      </div>
    </div>

    <!-- Input-TRAILER -->

    <div class="field form-group">
      <label class="label"
        >Trailer-Link (yt: 'watch?v=' durch 'embed/' ersetzen)</label
      >
      <div class="control has-icons-left block">
        <input
          class="input form-control"
          type="text"
          placeholder="Trailer-Link"
          formControlName="trailer"
        />
        <span class="icon is-small is-left">
          <i class="fas fa-film"></i>
        </span>
      </div>
    </div>

    <!-- Error-TRAILER -->

    <div
      class="error"
      *ngIf="form.get('trailer').touched && form.get('trailer').invalid"
    >
      <div *ngIf="form.get('trailer').errors.required">
        Trailer darf nicht leer sein
        <span class="icon is-small is-left">
          <i class="fas fa-exclamation-triangle"></i>
        </span>
      </div>

      <div *ngIf="form.get('trailer').errors.minlength">
        Trailer muss mind. 20 Zeichen enthalten.
      </div>
    </div>
    <!-- Input-BILD -->

    <div class="form-group">
      <label>Bild</label>

      <div>
        <button class="button" (click)="filePicker.click()" type="button">
          Bild hochladen
        </button>
        <input type="file" (change)="onImagePicked($event)" #filePicker />
      </div>
    </div>

    <div *ngIf="preview">
      <div class="label">
        <label> Bild-Vorschau </label>
      </div>

      <img [src]="preview" class="preview" alt="Movie Cover" />
    </div>

    <div
      class="image-preview error"
      *ngIf="form.get('image').touched && form.get('image').invalid"
    >
      <div *ngIf="form.get('image').errors.required">
        Bild darf nicht leer sein
        <span class="icon is-small is-left">
          <i class="fas fa-exclamation-triangle"></i>
        </span>
      </div>
    </div>

    <!-- BUTTONS -->

    <div class="field is-grouped buttons">
      <div class="control block">
        <button
          *ngIf="mode === 'Film_Hinzufuegen'"
          type="submit"
          [disabled]="!form.valid"
          class="button is-success"
        >
          Film hinzufügen
        </button>
        <button
          *ngIf="mode === 'Film_Bearbeiten'"
          type="submit"
          [disabled]="!form.valid"
          class="button is-success"
        >
          Änderungen speichern
        </button>
      </div>

      <div class="control block">
        <button routerLink="/Startseite" class="button is-link is-light">
          Abbrechen
        </button>
      </div>
    </div>
  </div>
</form>
