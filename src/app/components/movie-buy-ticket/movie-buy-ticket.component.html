<app-titel> Tickets für: {{ movie.title }} </app-titel>

<div class="all-container">
  <div class="movie_image">
    <img [src]="movie.image" [alt]="movie.title" />
  </div>

  <form
    [formGroup]="ticketform"
    (ngSubmit)="ticketform.valid && onBuyTickets()"
  >
    <div class="container is-max-desktop p-5 mt-5">
      <label>Sitzplatz</label>

      <div class="flex-container">
        <div>
          <img
            src="assets/kinoplatz/saal.jpg"
            alt="Kinosaal"
            style="
              max-width: 250px;
              object-fit: cover;
              object-position: center center;
            "
          />
        </div>

        <div class="flex-column">
          <div>
            <div>
              <label>Reihe</label>

              <div class="select is-small">
                <select class="select ml-4" formControlName="reihe">
                  <option>A</option>
                  <option>B</option>
                  <option>C</option>
                  <option>D</option>
                  <option>E</option>
                  <option>F</option>
                  <option>G</option>
                  <option>H</option>
                  <option>I</option>
                  <option>J</option>
                </select>
                <div
                  class="error"
                  *ngIf="
                    ticketform.get('reihe').touched &&
                    ticketform.get('reihe').invalid
                  "
                >
                  <div *ngIf="ticketform.get('reihe').errors.required">
                    Reihe erforderlich
                    <span class="icon is-small is-left">
                      <i class="fas fa-exclamation-triangle"></i>
                    </span>
                  </div>
                </div>
              </div>

              <label class="ml-4">Platz</label>
              <div class="select is-small ml-4">
                <select formControlName="platz">
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                  <option>5</option>
                  <option>6</option>
                  <option>7</option>
                  <option>8</option>
                  <option>9</option>
                  <option>10</option>
                </select>
                <div
                  class="error"
                  *ngIf="
                    ticketform.get('platz').touched &&
                    ticketform.get('platz').invalid
                  "
                >
                  <div *ngIf="ticketform.get('platz').errors.required">
                    Platz erforderlich
                    <span class="icon is-small is-left">
                      <i class="fas fa-exclamation-triangle"></i>
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <hr />

      <!--  INPUT SNACK    -->

      <div class="form-group">
        <label>Snack</label>

        <div class="select is-small">
          <select
            class="select ml-4"
            formControlName="snack_name"
            (change)="getSnackSize(); getSnackPrice()"
          >
            <option selected></option>
            <option *ngFor="let snack of snacksList">
              {{ snack.snack_name }}
            </option>
          </select>
        </div>

        <label class="ml-4">Größe</label>
        <div class="select is-small">
          <select
            class="select ml-4"
            formControlName="snack_size"
            (change)="getSnackPrice()"
          >
            <option selected></option>
            <option *ngFor="let snack of snacksSize">
              {{ snack.size }}
            </option>
          </select>
        </div>

        <label class="ml-4"
          >Preis: <span *ngIf="snacksPrice"> {{ snacksPrice }} €</span></label
        >
      </div>

      <hr />

      <!--  INPUT GETRÄNK    -->

      <div class="form-group">
        <label>Getränk</label>

        <div class="select is-small">
          <select
            class="select"
            formControlName="drink_name"
            (change)="getDrinkSize(); getDrinkPrice()"
          >
            <option selected></option>
            <option *ngFor="let drink of drinksList">
              {{ drink.drink_name }}
            </option>
          </select>
        </div>

        <label class="ml-4">Größe</label>
        <div class="select is-small">
          <select
            class="select"
            formControlName="drink_size"
            (change)="getDrinkPrice()"
          >
            <option selected></option>
            <option *ngFor="let drink of drinksSize">
              {{ drink.size }}
            </option>
          </select>
        </div>

        <label
          >Preis: <span *ngIf="drinksPrice"> {{ drinksPrice }} €</span></label
        >
      </div>

      <hr />

      <!--    PREIS    -->

      <div class="mt-6">
        Gesamtpreis:
        <span class="ml-2" *ngIf="getTotalPrice() > 0">
          {{ getTotalPrice() }}</span
        >
        <span *ngIf="getTotalPrice()">€</span>
      </div>

      <!-- BUTTONS -->

      <div class="field is-grouped buttons">
        <div class="control block">
          <button
            type="submit"
            [disabled]="!ticketform.valid"
            class="button is-success"
          >
            Tickets kaufen
          </button>
        </div>
        <div class="control block">
          <button routerLink="/Startseite" class="button is-link is-light">
            Abbrechen
          </button>
        </div>
      </div>
    </div>
  </form>
</div>
